"use strict";(self["webpackChunkquantms_org"]=self["webpackChunkquantms_org"]||[]).push([[344],{3624:(e,t,o)=>{o.d(t,{Zq:()=>G});var n=o(641),l=o(953),a=o(33),i=o(2307),s=o(7786),r=o(3753),c=o(3751),u=o(3366),d=o(3149),v="Expected a function";function f(e,t,o){var n=!0,l=!0;if("function"!=typeof e)throw new TypeError(v);return(0,d.A)(o)&&(n="leading"in o?!!o.leading:n,l="trailing"in o?!!o.trailing:l),(0,u.A)(e,t,{leading:n,maxWait:t,trailing:l})}const p=f;var m=o(5378),g=o(7407),R=o(1361),k=o(8548),b=o(819),y=o(1254),h=o(2154);const w=(0,b.b_)({urlList:{type:(0,b.jq)(Array),default:()=>(0,y.f)([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:(0,b.jq)(String)}}),C={close:()=>!0,switch:e=>(0,h.Et)(e),rotate:e=>(0,h.Et)(e)};var E=o(8396),x=o(7404),L=o(5980),I=o(4656),_=o(3344),F=o(5158);const z=(0,n.pM)({name:"ElImageViewer"}),O=(0,n.pM)({...z,props:w,emits:C,setup(e,{expose:t,emit:o}){var i;const r=e,u={CONTAIN:{name:"contain",icon:(0,l.IG)(k.FullScreen)},ORIGINAL:{name:"original",icon:(0,l.IG)(k.ScaleToOriginal)}};let d,v="";const{t:f}=(0,x.Ym)(),b=(0,L.DU)("image-viewer"),{nextZIndex:y}=(0,I.YK)(),h=(0,l.KR)(),w=(0,l.KR)([]),C=(0,l.uY)(),E=(0,l.KR)(!0),z=(0,l.KR)(r.initialIndex),O=(0,l.IJ)(u.CONTAIN),S=(0,l.KR)({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),$=(0,l.KR)(null!=(i=r.zIndex)?i:y()),A=(0,n.EW)((()=>{const{urlList:e}=r;return e.length<=1})),N=(0,n.EW)((()=>0===z.value)),W=(0,n.EW)((()=>z.value===r.urlList.length-1)),X=(0,n.EW)((()=>r.urlList[z.value])),B=(0,n.EW)((()=>[b.e("btn"),b.e("prev"),b.is("disabled",!r.infinite&&N.value)])),K=(0,n.EW)((()=>[b.e("btn"),b.e("next"),b.is("disabled",!r.infinite&&W.value)])),T=(0,n.EW)((()=>{const{scale:e,deg:t,offsetX:o,offsetY:n,enableTransition:l}=S.value;let a=o/e,i=n/e;const s=t*Math.PI/180,r=Math.cos(s),c=Math.sin(s);a=a*r+i*c,i=i*r-o/e*c;const d={transform:`scale(${e}) rotate(${t}deg) translate(${a}px, ${i}px)`,transition:l?"transform .3s":""};return O.value.name===u.CONTAIN.name&&(d.maxWidth=d.maxHeight="100%"),d})),M=(0,n.EW)((()=>`${z.value+1} / ${r.urlList.length}`));function Y(){P(),null==d||d(),document.body.style.overflow=v,o("close")}function G(){const e=p((e=>{switch(e.code){case _.R.esc:r.closeOnPressEscape&&Y();break;case _.R.space:U();break;case _.R.left:V();break;case _.R.up:J("zoomIn");break;case _.R.right:H();break;case _.R.down:J("zoomOut");break}})),t=p((e=>{const t=e.deltaY||e.deltaX;J(t<0?"zoomIn":"zoomOut",{zoomRate:r.zoomRate,enableTransition:!1})}));C.run((()=>{(0,s.MLh)(document,"keydown",e),(0,s.MLh)(document,"wheel",t)}))}function P(){C.stop()}function Q(){E.value=!1}function q(e){E.value=!1,e.target.alt=f("el.image.error")}function j(e){if(E.value||0!==e.button||!h.value)return;S.value.enableTransition=!1;const{offsetX:t,offsetY:o}=S.value,n=e.pageX,l=e.pageY,a=p((e=>{S.value={...S.value,offsetX:t+e.pageX-n,offsetY:o+e.pageY-l}})),i=(0,s.MLh)(document,"mousemove",a);(0,s.MLh)(document,"mouseup",(()=>{i()})),e.preventDefault()}function D(){S.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function U(){if(E.value)return;const e=(0,F.YD)(u),t=Object.values(u),o=O.value.name,n=t.findIndex((e=>e.name===o)),l=(n+1)%e.length;O.value=u[e[l]],D()}function Z(e){const t=r.urlList.length;z.value=(e+t)%t}function V(){N.value&&!r.infinite||Z(z.value-1)}function H(){W.value&&!r.infinite||Z(z.value+1)}function J(e,t={}){if(E.value)return;const{minScale:n,maxScale:l}=r,{zoomRate:a,rotateDeg:i,enableTransition:s}={zoomRate:r.zoomRate,rotateDeg:90,enableTransition:!0,...t};switch(e){case"zoomOut":S.value.scale>n&&(S.value.scale=Number.parseFloat((S.value.scale/a).toFixed(3)));break;case"zoomIn":S.value.scale<l&&(S.value.scale=Number.parseFloat((S.value.scale*a).toFixed(3)));break;case"clockwise":S.value.deg+=i,o("rotate",S.value.deg);break;case"anticlockwise":S.value.deg-=i,o("rotate",S.value.deg);break}S.value.enableTransition=s}function ee(e){var t;"pointer"===(null==(t=e.detail)?void 0:t.focusReason)&&e.preventDefault()}function te(){r.closeOnPressEscape&&Y()}function oe(e){if(e.ctrlKey)return e.deltaY<0||e.deltaY>0?(e.preventDefault(),!1):void 0}return(0,n.wB)(X,(()=>{(0,n.dY)((()=>{const e=w.value[0];(null==e?void 0:e.complete)||(E.value=!0)}))})),(0,n.wB)(z,(e=>{D(),o("switch",e)})),(0,n.sV)((()=>{G(),d=(0,s.MLh)("wheel",oe,{passive:!1}),v=document.body.style.overflow,document.body.style.overflow="hidden"})),t({setActiveItem:Z}),(e,t)=>((0,n.uX)(),(0,n.Wv)((0,l.R1)(g.Nr),{to:"body",disabled:!e.teleported},{default:(0,n.k6)((()=>[(0,n.bF)(c.eB,{name:"viewer-fade",appear:""},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{ref_key:"wrapper",ref:h,tabindex:-1,class:(0,a.C4)((0,l.R1)(b).e("wrapper")),style:(0,a.Tr)({zIndex:$.value})},[(0,n.bF)((0,l.R1)(m.A),{loop:"",trapped:"","focus-trap-el":h.value,"focus-start-el":"container",onFocusoutPrevented:ee,onReleaseRequested:te},{default:(0,n.k6)((()=>[(0,n.Lk)("div",{class:(0,a.C4)((0,l.R1)(b).e("mask")),onClick:(0,c.D$)((t=>e.hideOnClickModal&&Y()),["self"])},null,10,["onClick"]),(0,n.Q3)(" CLOSE "),(0,n.Lk)("span",{class:(0,a.C4)([(0,l.R1)(b).e("btn"),(0,l.R1)(b).e("close")]),onClick:Y},[(0,n.bF)((0,l.R1)(R.tk),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,l.R1)(k.Close))])),_:1})],2),(0,n.Q3)(" ARROW "),(0,l.R1)(A)?(0,n.Q3)("v-if",!0):((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("span",{class:(0,a.C4)((0,l.R1)(B)),onClick:V},[(0,n.bF)((0,l.R1)(R.tk),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,l.R1)(k.ArrowLeft))])),_:1})],2),(0,n.Lk)("span",{class:(0,a.C4)((0,l.R1)(K)),onClick:H},[(0,n.bF)((0,l.R1)(R.tk),null,{default:(0,n.k6)((()=>[(0,n.bF)((0,l.R1)(k.ArrowRight))])),_:1})],2)],64)),e.$slots.progress||e.showProgress?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,a.C4)([(0,l.R1)(b).e("btn"),(0,l.R1)(b).e("progress")])},[(0,n.RG)(e.$slots,"progress",{activeIndex:z.value,total:e.urlList.length},(()=>[(0,n.eW)((0,a.v_)((0,l.R1)(M)),1)]))],2)):(0,n.Q3)("v-if",!0),(0,n.Q3)(" ACTIONS "),(0,n.Lk)("div",{class:(0,a.C4)([(0,l.R1)(b).e("btn"),(0,l.R1)(b).e("actions")])},[(0,n.Lk)("div",{class:(0,a.C4)((0,l.R1)(b).e("actions__inner"))},[(0,n.RG)(e.$slots,"toolbar",{actions:J,prev:V,next:H,reset:U,activeIndex:z.value,setActiveItem:Z},(()=>[(0,n.bF)((0,l.R1)(R.tk),{onClick:e=>J("zoomOut")},{default:(0,n.k6)((()=>[(0,n.bF)((0,l.R1)(k.ZoomOut))])),_:1},8,["onClick"]),(0,n.bF)((0,l.R1)(R.tk),{onClick:e=>J("zoomIn")},{default:(0,n.k6)((()=>[(0,n.bF)((0,l.R1)(k.ZoomIn))])),_:1},8,["onClick"]),(0,n.Lk)("i",{class:(0,a.C4)((0,l.R1)(b).e("actions__divider"))},null,2),(0,n.bF)((0,l.R1)(R.tk),{onClick:U},{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)((0,n.$y)((0,l.R1)(O).icon)))])),_:1}),(0,n.Lk)("i",{class:(0,a.C4)((0,l.R1)(b).e("actions__divider"))},null,2),(0,n.bF)((0,l.R1)(R.tk),{onClick:e=>J("anticlockwise")},{default:(0,n.k6)((()=>[(0,n.bF)((0,l.R1)(k.RefreshLeft))])),_:1},8,["onClick"]),(0,n.bF)((0,l.R1)(R.tk),{onClick:e=>J("clockwise")},{default:(0,n.k6)((()=>[(0,n.bF)((0,l.R1)(k.RefreshRight))])),_:1},8,["onClick"])]))],2)],2),(0,n.Q3)(" CANVAS "),(0,n.Lk)("div",{class:(0,a.C4)((0,l.R1)(b).e("canvas"))},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.urlList,((t,o)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:o},[o===z.value?((0,n.uX)(),(0,n.CE)("img",{key:0,ref_for:!0,ref:e=>w.value[o]=e,src:t,style:(0,a.Tr)((0,l.R1)(T)),class:(0,a.C4)((0,l.R1)(b).e("img")),crossorigin:e.crossorigin,onLoad:Q,onError:q,onMousedown:j},null,46,["src","crossorigin"])):(0,n.Q3)("v-if",!0)],64)))),128))],2),(0,n.RG)(e.$slots,"default")])),_:3},8,["focus-trap-el"])],6)])),_:3})])),_:3},8,["disabled"]))}});var S=(0,E.A)(O,[["__file","image-viewer.vue"]]),$=o(4769);const A=(0,$.GU)(S),N=(0,b.b_)({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:(0,b.jq)([String,Object])},previewSrcList:{type:(0,b.jq)(Array),default:()=>(0,y.f)([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:(0,b.jq)(String)}}),W={load:e=>e instanceof Event,error:e=>e instanceof Event,switch:e=>(0,h.Et)(e),close:()=>!0,show:()=>!0},X=(e,t)=>{if(!i.oc||!e||!t)return!1;const o=e.getBoundingClientRect();let n;return n=t instanceof Element?t.getBoundingClientRect():{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},o.top<n.bottom&&o.bottom>n.top&&o.right>n.left&&o.left<n.right};var B=o(3205),K=o(1027);const T=(0,n.pM)({name:"ElImage",inheritAttrs:!1}),M=(0,n.pM)({...T,props:N,emits:W,setup(e,{expose:t,emit:o}){const c=e,{t:u}=(0,x.Ym)(),d=(0,L.DU)("image"),v=(0,n.OA)(),f=(0,n.EW)((()=>(0,r.A)(Object.entries(v).filter((([e])=>/^(data-|on[A-Z])/i.test(e)||["id","style"].includes(e)))))),p=(0,B.O)({excludeListeners:!0,excludeKeys:(0,n.EW)((()=>Object.keys(f.value)))}),m=(0,l.KR)(),g=(0,l.KR)(!1),R=(0,l.KR)(!0),k=(0,l.KR)(!1),b=(0,l.KR)(),y=(0,l.KR)(),w=i.oc&&"loading"in HTMLImageElement.prototype;let C;const E=(0,n.EW)((()=>[d.e("inner"),_.value&&d.e("preview"),R.value&&d.is("loading")])),I=(0,n.EW)((()=>{const{fit:e}=c;return i.oc&&e?{objectFit:e}:{}})),_=(0,n.EW)((()=>{const{previewSrcList:e}=c;return(0,a.cy)(e)&&e.length>0})),F=(0,n.EW)((()=>{const{previewSrcList:e,initialIndex:t}=c;let o=t;return t>e.length-1&&(o=0),o})),z=(0,n.EW)((()=>"eager"!==c.loading&&(!w&&"lazy"===c.loading||c.lazy))),O=()=>{i.oc&&(R.value=!0,g.value=!1,m.value=c.src)};function S(e){R.value=!1,g.value=!1,o("load",e)}function $(e){R.value=!1,g.value=!0,o("error",e)}function N(){X(b.value,y.value)&&(O(),M())}const W=(0,i.k3)(N,200,!0);async function T(){var e;if(!i.oc)return;await(0,n.dY)();const{scrollContainer:t}=c;(0,h.vq)(t)?y.value=t:(0,a.Kg)(t)&&""!==t?y.value=null!=(e=document.querySelector(t))?e:void 0:b.value&&(y.value=(0,K.Bo)(b.value)),y.value&&(C=(0,s.MLh)(y,"scroll",W),setTimeout((()=>N()),100))}function M(){i.oc&&y.value&&W&&(null==C||C(),y.value=void 0)}function Y(){_.value&&(k.value=!0,o("show"))}function G(){k.value=!1,o("close")}function P(e){o("switch",e)}return(0,n.wB)((()=>c.src),(()=>{z.value?(R.value=!0,g.value=!1,M(),T()):O()})),(0,n.sV)((()=>{z.value?T():O()})),t({showPreview:Y}),(e,t)=>((0,n.uX)(),(0,n.CE)("div",(0,n.v6)({ref_key:"container",ref:b},(0,l.R1)(f),{class:[(0,l.R1)(d).b(),e.$attrs.class]}),[g.value?(0,n.RG)(e.$slots,"error",{key:0},(()=>[(0,n.Lk)("div",{class:(0,a.C4)((0,l.R1)(d).e("error"))},(0,a.v_)((0,l.R1)(u)("el.image.error")),3)])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[void 0!==m.value?((0,n.uX)(),(0,n.CE)("img",(0,n.v6)({key:0},(0,l.R1)(p),{src:m.value,loading:e.loading,style:(0,l.R1)(I),class:(0,l.R1)(E),crossorigin:e.crossorigin,onClick:Y,onLoad:S,onError:$}),null,16,["src","loading","crossorigin"])):(0,n.Q3)("v-if",!0),R.value?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,a.C4)((0,l.R1)(d).e("wrapper"))},[(0,n.RG)(e.$slots,"placeholder",{},(()=>[(0,n.Lk)("div",{class:(0,a.C4)((0,l.R1)(d).e("placeholder"))},null,2)]))],2)):(0,n.Q3)("v-if",!0)],64)),(0,l.R1)(_)?((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[k.value?((0,n.uX)(),(0,n.Wv)((0,l.R1)(A),{key:0,"z-index":e.zIndex,"initial-index":(0,l.R1)(F),infinite:e.infinite,"zoom-rate":e.zoomRate,"min-scale":e.minScale,"max-scale":e.maxScale,"show-progress":e.showProgress,"url-list":e.previewSrcList,crossorigin:e.crossorigin,"hide-on-click-modal":e.hideOnClickModal,teleported:e.previewTeleported,"close-on-press-escape":e.closeOnPressEscape,onClose:G,onSwitch:P},(0,n.eX)({toolbar:(0,n.k6)((t=>[(0,n.RG)(e.$slots,"toolbar",(0,a._B)((0,n.Ng)(t)))])),default:(0,n.k6)((()=>[e.$slots.viewer?((0,n.uX)(),(0,n.CE)("div",{key:0},[(0,n.RG)(e.$slots,"viewer")])):(0,n.Q3)("v-if",!0)])),_:2},[e.$slots.progress?{name:"progress",fn:(0,n.k6)((t=>[(0,n.RG)(e.$slots,"progress",(0,a._B)((0,n.Ng)(t)))]))}:void 0]),1032,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):(0,n.Q3)("v-if",!0)],64)):(0,n.Q3)("v-if",!0)],16))}});var Y=(0,E.A)(M,[["__file","image.vue"]]);const G=(0,$.GU)(Y)},8746:(e,t,o)=>{o(6422)},9766:(e,t,o)=>{o.d(t,{b:()=>i});var n=o(641),l=o(953),a=o(1651);const i=({from:e,replacement:t,scope:o,version:i,ref:s,type:r="API"},c)=>{(0,n.wB)((()=>(0,l.R1)(c)),(n=>{n&&(0,a.U)(o,`[${r}] ${e} is about to be deprecated in version ${i}, please use ${t} instead.\nFor more detail, please visit: ${s}\n`)}),{immediate:!0})}}}]);
//# sourceMappingURL=344.71ec9469.js.map